{"ast":null,"code":"const express = require('express');\nconst router = express.Router();\nconst User = require('../models/User');\nconst auth = require('../middleware/auth');\nrouter.get('/profile', auth, async (req, res) => {\n  try {\n    const user = await User.findById(req.user.userId);\n    const moviesCount = await Movie.countDocuments({\n      user: req.user.userId\n    });\n    const favoritesCount = await Movie.countDocuments({\n      favorites: req.user.userId\n    });\n    res.json({\n      username: user.username,\n      email: user.email,\n      createdAt: user.createdAt,\n      stats: {\n        moviesCount,\n        favoritesCount\n      }\n    });\n  } catch (error) {\n    res.status(500).json({\n      error: error.message\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","router","Router","User","auth","get","req","res","user","findById","userId","moviesCount","Movie","countDocuments","favoritesCount","favorites","json","username","email","createdAt","stats","error","status","message","module","exports"],"sources":["C:/Users/faoue/Desktop/movie-vault/frontend/src/pages/Profile.js"],"sourcesContent":["const express = require('express');\r\nconst router = express.Router();\r\nconst User = require('../models/User');\r\nconst auth = require('../middleware/auth');\r\n\r\nrouter.get('/profile', auth, async (req, res) => {\r\n  try {\r\n    const user = await User.findById(req.user.userId);\r\n    const moviesCount = await Movie.countDocuments({ user: req.user.userId });\r\n    const favoritesCount = await Movie.countDocuments({ \r\n      favorites: req.user.userId \r\n    });\r\n\r\n    res.json({\r\n      username: user.username,\r\n      email: user.email,\r\n      createdAt: user.createdAt,\r\n      stats: {\r\n        moviesCount,\r\n        favoritesCount\r\n      }\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,IAAI,GAAGH,OAAO,CAAC,gBAAgB,CAAC;AACtC,MAAMI,IAAI,GAAGJ,OAAO,CAAC,oBAAoB,CAAC;AAE1CC,MAAM,CAACI,GAAG,CAAC,UAAU,EAAED,IAAI,EAAE,OAAOE,GAAG,EAAEC,GAAG,KAAK;EAC/C,IAAI;IACF,MAAMC,IAAI,GAAG,MAAML,IAAI,CAACM,QAAQ,CAACH,GAAG,CAACE,IAAI,CAACE,MAAM,CAAC;IACjD,MAAMC,WAAW,GAAG,MAAMC,KAAK,CAACC,cAAc,CAAC;MAAEL,IAAI,EAAEF,GAAG,CAACE,IAAI,CAACE;IAAO,CAAC,CAAC;IACzE,MAAMI,cAAc,GAAG,MAAMF,KAAK,CAACC,cAAc,CAAC;MAChDE,SAAS,EAAET,GAAG,CAACE,IAAI,CAACE;IACtB,CAAC,CAAC;IAEFH,GAAG,CAACS,IAAI,CAAC;MACPC,QAAQ,EAAET,IAAI,CAACS,QAAQ;MACvBC,KAAK,EAAEV,IAAI,CAACU,KAAK;MACjBC,SAAS,EAAEX,IAAI,CAACW,SAAS;MACzBC,KAAK,EAAE;QACLT,WAAW;QACXG;MACF;IACF,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOO,KAAK,EAAE;IACdd,GAAG,CAACe,MAAM,CAAC,GAAG,CAAC,CAACN,IAAI,CAAC;MAAEK,KAAK,EAAEA,KAAK,CAACE;IAAQ,CAAC,CAAC;EAChD;AACF,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGxB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}